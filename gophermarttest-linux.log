=== RUN   TestGophermart
=== RUN   TestGophermart/TestEndToEnd
=== RUN   TestGophermart/TestEndToEnd/register_accrual_mechanic
=== RUN   TestGophermart/TestEndToEnd/register_order_for_accrual
=== RUN   TestGophermart/TestEndToEnd/register_user
=== RUN   TestGophermart/TestEndToEnd/order_upload
    gophermart_e2e_test.go:146: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:146
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Not equal: 
        	            	expected: 202
        	            	actual  : 404
        	Test:       	TestGophermart/TestEndToEnd/order_upload
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'POST http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:152: Оригинальный запрос:
        
        POST /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        Content-Type: text/plain
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
        
        638635
        
=== RUN   TestGophermart/TestEndToEnd/await_order_processed
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:180: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:180
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Received unexpected error:
        	            	Get "http://localhost:8080/api/user/orders": context deadline exceeded
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Ошибка при попытке сделать запрос на получение статуса расчета начисления в системе лояльности
    gophermart_e2e_test.go:181: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:181
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 0
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:184: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:184
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	"" does not contain "application/json"
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Заголовок ответа Content-Type содержит несоответствующее значение
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:166: Не удалось дождаться окончания расчета начисления
=== RUN   TestGophermart/TestEndToEnd/check_balance
    gophermart_e2e_test.go:219: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:219
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	[]int{200, 204} does not contain 404
        	Test:       	TestGophermart/TestEndToEnd/check_balance
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/balance'
    gophermart_e2e_test.go:231: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:231
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Not equal: 
        	            	expected: main.userBalance{Current:729.98, Withdrawn:0}
        	            	actual  : main.userBalance{Current:0, Withdrawn:0}
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1,3 +1,3 @@
        	            	 (main.userBalance) {
        	            	- Current: (float32) 729.98,
        	            	+ Current: (float32) 0,
        	            	  Withdrawn: (float32) 0
        	Test:       	TestGophermart/TestEndToEnd/check_balance
        	Messages:   	Баланс пользователя не соответствует ожидаемому
    gophermart_e2e_test.go:235: Оригинальный запрос:
        
        GET /api/user/balance HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
=== RUN   TestGophermart/TestEndToEnd/withdraw_balance
    gophermart_e2e_test.go:260: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:260
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Not equal: 
        	            	expected: 200
        	            	actual  : 404
        	Test:       	TestGophermart/TestEndToEnd/withdraw_balance
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'POST http://localhost:8080/api/user/balance/withdraw'
    gophermart_e2e_test.go:266: Оригинальный запрос:
        
        POST /api/user/balance/withdraw HTTP/1.1
        Host: localhost:8080
        Accept: application/json
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        Content-Type: application/json
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
        
        {
        			"order": "5457353",
            		"sum": 376.20
        		}
        
=== RUN   TestGophermart/TestEndToEnd/recheck_balance
    gophermart_e2e_test.go:280: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:280
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Not equal: 
        	            	expected: 200
        	            	actual  : 404
        	Test:       	TestGophermart/TestEndToEnd/recheck_balance
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/balance'
    gophermart_e2e_test.go:289: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:289
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Max difference between 353.77637 and 0 allowed is 0.01, but difference was 353.7763671875
        	Test:       	TestGophermart/TestEndToEnd/recheck_balance
        	Messages:   	Баланс пользователя не соответствует ожидаемому
    gophermart_e2e_test.go:290: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:290
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Max difference between 376.2036 and 0 allowed is 0.01, but difference was 376.20361328125
        	Test:       	TestGophermart/TestEndToEnd/recheck_balance
        	Messages:   	Списанная сумма не соответствует ожидаемой
    gophermart_e2e_test.go:294: Оригинальный запрос:
        
        GET /api/user/balance HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
=== RUN   TestGophermart/TestEndToEnd/check_withdrawals
    gophermart_e2e_test.go:309: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_e2e_test.go:309
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Not equal: 
        	            	expected: 200
        	            	actual  : 404
        	Test:       	TestGophermart/TestEndToEnd/check_withdrawals
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/withdrawals'
    gophermart_e2e_test.go:315: Оригинальный запрос:
        
        GET /api/user/withdrawals HTTP/1.1
        Host: localhost:8080
        Accept: application/json
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5MzEsImxvZ2luIjoiazFyUGZQVHZGcCIsInVzZXJfaWQiOjE3fQ.hwy8Wc8TRRkFjckL9KKlovQVt8A0xKY4UomD04iuDTM
        Content-Type: application/json
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
=== RUN   TestGophermart/TestUserAuth
=== RUN   TestGophermart/TestUserAuth/register_user
=== RUN   TestGophermart/TestUserAuth/login_user
=== RUN   TestGophermart/TestUserOrders
=== RUN   TestGophermart/TestUserOrders/unauthorized_order_upload
=== RUN   TestGophermart/TestUserOrders/unauthorized_orders_list
=== RUN   TestGophermart/TestUserOrders/register_user
=== RUN   TestGophermart/TestUserOrders/bad_order_upload
    gophermart_orders_test.go:106: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_orders_test.go:106
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Not equal: 
        	            	expected: 422
        	            	actual  : 404
        	Test:       	TestGophermart/TestUserOrders/bad_order_upload
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'POST http://localhost:8080/api/user/orders'
    gophermart_orders_test.go:112: Оригинальный запрос:
        
        POST /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5NTIsImxvZ2luIjoiTkxQSEZLcFB0IiwidXNlcl9pZCI6MTl9.1gV9McYtOSZ9wk3hjzl265A_FjGLdsqh37aMJn88MqA
        Content-Type: text/plain
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
        
        12345678902
        
=== RUN   TestGophermart/TestUserOrders/order_upload
    gophermart_orders_test.go:126: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_orders_test.go:126
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Not equal: 
        	            	expected: 202
        	            	actual  : 404
        	Test:       	TestGophermart/TestUserOrders/order_upload
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'POST http://localhost:8080/api/user/orders'
    gophermart_orders_test.go:132: Оригинальный запрос:
        
        POST /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5NTIsImxvZ2luIjoiTkxQSEZLcFB0IiwidXNlcl9pZCI6MTl9.1gV9McYtOSZ9wk3hjzl265A_FjGLdsqh37aMJn88MqA
        Content-Type: text/plain
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
        
        17114368545
        
=== RUN   TestGophermart/TestUserOrders/duplicate_order_upload_same_user
    gophermart_orders_test.go:146: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_orders_test.go:146
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Not equal: 
        	            	expected: 200
        	            	actual  : 404
        	Test:       	TestGophermart/TestUserOrders/duplicate_order_upload_same_user
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'POST http://localhost:8080/api/user/orders'
    gophermart_orders_test.go:152: Оригинальный запрос:
        
        POST /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5NTIsImxvZ2luIjoiTkxQSEZLcFB0IiwidXNlcl9pZCI6MTl9.1gV9McYtOSZ9wk3hjzl265A_FjGLdsqh37aMJn88MqA
        Content-Type: text/plain
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
        
        17114368545
        
=== RUN   TestGophermart/TestUserOrders/orders_list
    gophermart_orders_test.go:165: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_orders_test.go:165
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Not equal: 
        	            	expected: 200
        	            	actual  : 404
        	Test:       	TestGophermart/TestUserOrders/orders_list
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_orders_test.go:172: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_orders_test.go:172
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	"[]" should have 1 item(s), but has 0
        	Test:       	TestGophermart/TestUserOrders/orders_list
        	Messages:   	Ожидаем отличное от полученного кол-во заказов
    gophermart_orders_test.go:181: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5NTIsImxvZ2luIjoiTkxQSEZLcFB0IiwidXNlcl9pZCI6MTl9.1gV9McYtOSZ9wk3hjzl265A_FjGLdsqh37aMJn88MqA
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
=== RUN   TestGophermart/TestUserOrders/duplicate_order_upload_other_user
    gophermart_orders_test.go:236: 
        	Error Trace:	/home/dev/src/maynagashev/gophermart/gophermart_orders_test.go:236
        	            				/home/dev/src/maynagashev/gophermart/suite.go:91
        	Error:      	Not equal: 
        	            	expected: 409
        	            	actual  : 404
        	Test:       	TestGophermart/TestUserOrders/duplicate_order_upload_other_user
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'POST http://localhost:8080/api/user/orders'
    gophermart_orders_test.go:242: Оригинальный запрос:
        
        POST /api/user/orders HTTP/1.1
        Host: localhost:8080
        Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3Mzc2MzM5NTIsImxvZ2luIjoiZ1ROU0RoVHZSQUwiLCJ1c2VyX2lkIjoyMH0.6ClthxlHrk9DWVFEl-j7SabEmIkK2Uv4qv5sqPINeO0
        Content-Type: text/plain
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
        
        17114368545
        
=== NAME  TestGophermart
    gophermart_suite_test.go:105: останавливаем процесс gophermart
    gophermart_suite_test.go:127: Процесс завершился с не нулевым статусом 1
    gophermart_suite_test.go:140: Получен STDOUT лог процесса:
        
        2025/01/22 19:05:31 goose: no migrations to run. current version: 1
        
           ____    __
          / __/___/ /  ___
         / _// __/ _ \/ _ \
        /___/\__/_//_/\___/ v4.11.4
        High performance, minimalist Go web framework
        https://echo.labstack.com
        ____________________________________O/_______
                                            O\
        2025/01/22 19:05:31 ERROR не удалось запустить сервер error="listen tcp 127.0.0.1:8080: bind: address already in use"
    gophermart_suite_test.go:108: останавливаем процесс accrual
    gophermart_suite_test.go:140: Получен STDOUT лог процесса:
        
        {"level":"info","ts":1737547531.2784255,"caller":"accrual/main.go:52","msg":"starting HTTP server","addr":"localhost:46171"}
        {"level":"info","ts":1737547552.5239623,"caller":"accrual/main.go:63","msg":"shutting down gracefully","signal":"interrupt"}
--- FAIL: TestGophermart (21.26s)
    --- FAIL: TestGophermart/TestEndToEnd (20.19s)
        --- PASS: TestGophermart/TestEndToEnd/register_accrual_mechanic (0.00s)
        --- PASS: TestGophermart/TestEndToEnd/register_order_for_accrual (0.00s)
        --- PASS: TestGophermart/TestEndToEnd/register_user (0.18s)
        --- FAIL: TestGophermart/TestEndToEnd/order_upload (0.00s)
        --- FAIL: TestGophermart/TestEndToEnd/await_order_processed (20.00s)
        --- FAIL: TestGophermart/TestEndToEnd/check_balance (0.00s)
        --- FAIL: TestGophermart/TestEndToEnd/withdraw_balance (0.00s)
        --- FAIL: TestGophermart/TestEndToEnd/recheck_balance (0.00s)
        --- FAIL: TestGophermart/TestEndToEnd/check_withdrawals (0.00s)
    --- PASS: TestGophermart/TestUserAuth (0.47s)
        --- PASS: TestGophermart/TestUserAuth/register_user (0.25s)
        --- PASS: TestGophermart/TestUserAuth/login_user (0.22s)
    --- FAIL: TestGophermart/TestUserOrders (0.39s)
        --- PASS: TestGophermart/TestUserOrders/unauthorized_order_upload (0.00s)
        --- PASS: TestGophermart/TestUserOrders/unauthorized_orders_list (0.00s)
        --- PASS: TestGophermart/TestUserOrders/register_user (0.20s)
        --- FAIL: TestGophermart/TestUserOrders/bad_order_upload (0.00s)
        --- FAIL: TestGophermart/TestUserOrders/order_upload (0.00s)
        --- FAIL: TestGophermart/TestUserOrders/duplicate_order_upload_same_user (0.00s)
        --- FAIL: TestGophermart/TestUserOrders/orders_list (0.00s)
        --- FAIL: TestGophermart/TestUserOrders/duplicate_order_upload_other_user (0.17s)
FAIL
